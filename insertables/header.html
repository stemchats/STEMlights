<!DOCTYPE html>
<html lang="en">
<html>

<head>

    <!-- search bar expands when clicked -->
    <script>
        // $(document).ready(function () {
        //     $(".search-icon").click(function () {
        //         $(".search-bar").toggleClass("active")
        //     })
        // })
    </script>


</head>

<body>
    <header>
        <div class="block">
            <div class="logo">
                <a class="logo-text" href="/">
                    <h1>
                        <span class="logotxt-stem">stem</span><span class="logotxt-lights">lights</span>
                    </h1>
                </a>
            </div>
            <p class="stemchats">a <a class="stemchats-link" href="https://stemchats.org" target="_blank">stemchats</a> program</p>
        </div>
        <input type="checkbox" id="menu-icon">
        <!-- <label for="menu-icon"><i class="fas fa-bars"></i></label> -->
        
        <label for="menu-icon" class="lines-button x" >
            <span class="lines"></span>
        </label>
        <!-- <button class="lines-button x navbar-toggler ml-auto custom-toggler" type="button" role="button" aria-label="Toggle Navigation" data-toggle = "collapse" data-target = "#mainNav">
        </button> -->

        <div class="collapsible-menu">
            <div class="show collapse" id="navbarTogglerDemo02">
                <nav>
                    <ul>
                        <li class="nav-item">
                            <a class="nav-link" href="/" id="home-nav">home</a>
                        </li>
                        <li>
                            <a class="nav-link" href="/search/" id="search-nav">
                                <span class="search-icon"><i class="fas fa-search"></i></span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/edition/" id="newsletter-nav">newsletter</a>
                        </li>
                        <!-- <li class="nav-item">
                        <a class="nav-link" href="#">podcast</a>
                    </li> -->
                        <li class="nav-item">
                            <a class="nav-link" href="/about-us/" id="about-nav">about us</a>
                        </li>

                        <li class="nav-item">
                            <a href="#" class="btn navbtn1"
                                onclick="window.open('https://confirmsubscription.com/h/t/88449A101872A7A4', '_blank')">subscribe</a>
                            <!-- <a class="nav-link" target="_blank" href="https://confirmsubscription.com/h/t/88449A101872A7A4">subscribe</a> -->
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- <div class="search-bar" id="searchBar"></div> -->

            <!-- <div class="search-bar">
            <form>
                <input type="search" class="search-input" placeholder="Search..." value="" name="search" autocomplete="off">
                <input type="submit" class="search-submit" value="">
                <span class="search-icon"><i class="fas fa-search"></i></span>
            </form>
        </div> -->
        </div>
    </header>
    <!-- search bar script -->

    <!-- Load our React component. -->
    <!-- <script type="text/babel">
     class SearchForm extends React.Component {
       constructor(props) {
         super(props);
         this.state = {value: ''};

         this.handleChange = this.handleChange.bind(this);
         this.handleSubmit = this.handleSubmit.bind(this);
       }

       handleChange(event) {
         this.setState({value: event.target.value});
       }

       handleSubmit(event) {
         alert(this.state.value);
         event.preventDefault();
       }

       render() {
         return (
           <form onSubmit={this.handleSubmit}>
           <input type="search" class="search-input" placeholder="Search..." value={this.state.value} onChange={this.handleChange} name="search" autocomplete="off">
           <input type="submit" class="search-submit" value="">
           <span class="search-icon"><i class="fas fa-search"></i></span>
           </form>
         );
       }
     }
     ReactDOM.render(
        <SearchForm />,
        document.getElementById('searchBar')
      );
     </script> -->

    <script>
        var prevScrollpos = window.pageYOffset;
        window.onscroll = scrollShowNav;

        function scrollShowNav() {
            var currentScrollPos = window.pageYOffset;
            var header = document.getElementsByTagName("header")[0];
            var menu = document.getElementsByClassName("collapsible-menu")[0];
            var stemchats = document.getElementsByClassName("stemchats")[0];
            if (prevScrollpos > currentScrollPos || currentScrollPos == '0') {
                header.style.top = "0px";
                header.style.pointerEvents = "auto";

                if (window.matchMedia("(max-width: 991px)").matches) {
                    menu.style.top = "60px";
                }
                else {
                    menu.style.top = "30px";
                }

                if (window.matchMedia("(max-width: 479px)").matches) {
                    stemchats.style.opacity = 1;
                }
                else {
                    stemchats.style.opacity = 1;
                }
            } else {
                header.style.top = "-50px";
                header.style.pointerEvents = "none";

                if (window.matchMedia("(max-width: 991px)").matches) {
                    menu.style.top = "10px";
                }
                else {
                    menu.style.top = "-20px";
                }

                if (window.matchMedia("(max-width: 479px)").matches) {
                    stemchats.style.opacity = 0;
                }
                else {
                    stemchats.style.opacity = 1;
                }
            }
            prevScrollpos = currentScrollPos;
        }


        // var menu_check = document.getElementsByClassName("navbar-toggler ml-auto custom-toggler")[0];
        var menu_check = document.getElementById("menu-icon");
        var lines = document.getElementsByClassName("lines-button x")[0];

        menu_check.addEventListener('change', (event) => {
            if (event.currentTarget.checked) {
                lines.classList.add("close");
            } else {
                lines.classList.remove("close");
            }
        });

        

        // click anywhere will close menu icon
        /* document.body.addEventListener('mouseup', function() {
                console.log("clicked");
                if (menu_check.checked) {
                    menu_check.checked = false;
                }
            }
        ); */
    </script>
</body>

</html>
